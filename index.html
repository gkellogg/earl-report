<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; RDF.rb: Linked Data for Ruby
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-earl-report">earl-report</h1>

<p>Ruby gem to consolidate multiple <a href="http://www.w3.org/TR/EARL10-Schema/">EARL</a> report and generate a rollup conformance report.</p>

<p><a href="http://badge.fury.io/rb/earl-report"><img src="https://badge.fury.io/rb/earl-report.png"></a> <a href="https://github.com/gkellogg/earl-report/actions?query=workflow%3ACI"><img src="https://github.com/gkellogg/earl-report/workflows/CI/badge.svg?branch=develop"></a> <a href="https://coveralls.io/r/gkellogg/earl-report?branch=develop"><img src="https://coveralls.io/repos/gkellogg/earl-report/badge.svg?branch=develop"></a></p>

<h2 id="label-Description">Description</h2>

<p>Reads a test manifest in the <a href="http://www.w3.org/2011/rdf-wg/wiki/Turtle_Test_Suite">standard RDF WG format</a> along with one or more individual &lt;abbr title=“Evaluation and Report Language (EARL) 1.0 Schema”&gt;EARL[http://www.w3.org/TR/EARL10-Schema/]</abbr&gt; reports and generates a rollup report in HTML in <a href="http://dev.w3.org/2009/dap/ReSpec.js/documentation.html">ReSpec</a> format.</p>

<p><a href="http://www.w3.org/TR/EARL10-Schema/">EARL}[] reports use the {Evaluation and Report Language (EARL) 1.0 Schema</a> to describe test results in RDF to relate the results for a given <em>subject</em> to a <em>test</em> defined in a <em>test manifest</em>.</p>

<h2 id="label-Individual+EARL+reports">Individual EARL reports</h2>

<p>Results for individual implementations should be specified in Turtle form, but may be specified in an any compatible RDF serialization. The report is composed of <code>Assertion</code> declarations in the following form:</p>

<pre class="code ruby"><code class="ruby">[ a earl:Assertion;
  earl:assertedBy &lt;https://greggkellogg.net/foaf#me&gt;;
  earl:subject &lt;https://rubygems.org/gems/rdf-turtle&gt;;
  earl:test &lt;http://dvcs.w3.org/hg/rdf/raw-file/default/rdf-turtle/tests-ttl/manifest.ttl#turtle-syntax-file-01&gt;;
  earl:result [
    a earl:TestResult;
    earl:outcome earl:passed;
    dc:date &quot;2012-11-17T15:19:11-05:00&quot;^^xsd:dateTime];
  earl:mode earl:automatic ] .
</code></pre>

<p>Additionally, <code>earl:subject</code> is expected to reference a <a href="https://github.com/edumbill/doap/wiki">DOAP</a> description of the reported software, in the following form:</p>

<pre class="code ruby"><code class="ruby">&lt;https://rubygems.org/gems/rdf-turtle&gt; a doap:Project, earl:TestSubject, earl:Software ;
  doap:name          &quot;RDF::Turtle&quot; ;
  doap:developer     &lt;https://greggkellogg.net/foaf#me&gt; ;
  doap:homepage      &lt;https://ruby-rdf.github.io/rdf-turtle&gt; ;
  doap:description   &quot;RDF::Turtle is an Turtle reader/writer for the RDF.rb library suite.&quot;@en ;
  doap:release [
                     doap:name &quot;RDF::Turtle 3.1.0&quot; ;
                     doap:created &quot;2015-09-27&quot;^^xsd:date ;
                     doap:revision &quot;3.1.0&quot;
  ] ;
  doap:programming-language &quot;Ruby&quot; .
</code></pre>

<p>The <a href="https://github.com/edumbill/doap/wiki">DOAP</a> description may be included in the <a href="http://www.w3.org/TR/EARL10-Schema/">EARL</a> report. If not found, the IRI identified by <code>earl:subject</code> will be dereferenced and is presumed to provide a <a href="https://github.com/edumbill/doap/wiki">DOAP</a> specification of the test subject.</p>

<p>The <code>doap:developer</code> is expected to reference a <a href="http://xmlns.com/foaf/spec/">FOAF</a> profile for the agent (user or organization) responsible for the test subject. It is expected to be of the following form:</p>

<pre class="code ruby"><code class="ruby">&lt;https://greggkellogg.net/foaf#me&gt; foaf:name &quot;Gregg Kellogg&quot; .
</code></pre>

<p>If not found, the IRI identified by <code>doap:developer</code> will be dereferenced and is presumed to provide a <a href="http://xmlns.com/foaf/spec/">FOAF</a> profile of the developer.</p>

<p>Assertions are added to each test entry based on that test being referenced from the assertion.</p>

<h2 id="label-Manifest+query">Manifest query</h2>

<p>The test manifest is used to find test entries and a manifest. The built-in query is based on the [standard RDF WG format][]. Alternative manifest formats can be used by specifying a customized manifest query, but may require a custom <a href="http://haml.info/">Haml</a> template for report generation. The default query is the following:</p>

<pre class="code ruby"><code class="ruby">PREFIX mf: &lt;http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;

SELECT ?uri ?testAction ?manUri
WHERE {
  ?uri mf:action ?testAction .
  OPTIONAL {
    ?manUri a mf:Manifest; mf:entries ?lh .
    ?lh rdf:first ?uri .
  }
}
</code></pre>

<h2 id="label-Report+generation+template">Report generation template</h2>

<p>The report template is in <a href="http://dev.w3.org/2009/dap/ReSpec.js/documentation.html">ReSpec</a> form using <a href="http://haml.info/">Haml</a> to generate individual report elements.</p>

<h2 id="label-Changes+from+previous+versions">Changes from previous versions</h2>

<h3 id="label-Version+0.7">Version 0.7</h3>

<p>Version 0.7 creates incompatibilities with previous result formats. Previously, terms were “added” to the EARL vocabulary to help with coordination. This version pulls that back, but does depend on an added <code>earl:Report</code> class which acts as an appropriate container for for collections of <code>earl:Assertion</code>.</p>

<p>Within an <code>earl:TestCase</code>, the former <code>earl:assertions</code> property is replaced with a reverse property on <code>earl:test</code> so that, in the JSON-LD representation, an <code>earl:TestCase</code> will contain a property representing the related assertions.</p>

<p>Also, <code>earl:assertions</code> had been miss-appropriated to reference the sources of the individual test results provided for each test subject. A new property as appropriated from the Test Manifest vocabulary: <code>mf:report</code>. The alias <code>assertions</code> continues to be used within the JSON-LD representation, although it now maps to <code>mf:report</code> at the top level, and as mentioned, is a reverse property of <code>earl:test</code> within an <code>earl:TestCase</code>.</p>

<p>These changes may require updates to customized Haml templates.</p>

<h3 id="label-Version+0.3">Version 0.3</h3>

<p>Version 0.3 and prior re-constructed the test manifest used to create the body of the report, which caused information not described within the query to be lost. Starting with 0.4, all manifests and assertions are read into a single graph, and each test references a list of assertions against it using a list referenced by <code>mf:assertions</code>. Additionally, all included manifests are included in a top-level entity referenced via <code>mf:entries</code>. For example:</p>

<pre class="code ruby"><code class="ruby">&lt;&gt; a earl:Software, doap:Project;
   mf:entries (&lt;http://example/manifest.ttl&gt;);
   mf:assertions (&lt;spec/test-files/report-complete.ttl&gt;)  .

&lt;http://example/manifest.ttl&gt; a mf:Manifest, earl:Report;
   mf:name &quot;Example Test Cases&quot;;
   rdfs:comment &quot;Description for Example Test Cases&quot;;
   mf:entries (&lt;http://example/manifest.ttl#testeval00&gt;) .

&lt;http://example/manifest.ttl#testeval00&gt; a earl:TestCriterion, earl:TestCase;
   mf:name &quot;subm-test-00&quot;;
   rdfs:comment &quot;Blank subject&quot;;
   mf:action &lt;http://example/test-00.ttl&gt;;
   mf:result &lt;http://example/test-00.out&gt;;
   mf:assertions ([
       a earl:Assertion;
       earl:assertedBy &lt;https://greggkellogg.net/foaf#me&gt;;
       earl:mode earl:automatic;
       earl:result [
         a earl:TestResult;
         dc:date &quot;2012-11-06T19:23:29-08:00&quot;^^xsd:dateTime;
         earl:outcome earl:passed
       ];
       earl:subject &lt;https://rubygems.org/gems/rdf-turtle&gt;;
       earl:test &lt;http://example/manifest.ttl#testeval00&gt;
     ]) .
</code></pre>

<h2 id="label-Usage">Usage</h2>

<p>The <code>earl-report</code> command may be used to directly create a report from zero or more input files, which are themselves <a href="http://www.w3.org/TR/EARL10-Schema/">EARL</a> report.</p>

<pre class="code ruby"><code class="ruby">gem install earl-report

earl-report \
  --base            # Base URI to use when loading test manifest
  --bibRef          # ReSpec BibRef of specification being reported upon
  --format          # Format of output, one of &#39;ttl&#39;, &#39;json&#39;, or &#39;html&#39;
  --json            # Input is a JSON-LD formatted result
  --manifest        # Test manifest
  --name            # Name of specification
  --output          # Output report to file
  --query           # Query, or file containing query for extracting information from Test manifest
  --rc              # Write options to run-control file
  --template        # Specify or return default report template
  report*           # one or more EARL report in most RDF formats
</code></pre>

<p>Generally, creating a <code>json</code> format first is more efficient. Subsequent invocations can then use the <code>--json</code> and use the generated JSON-LD file instead of re-parsing each report.</p>

<h3 id="label-Initialization+File">Initialization File</h3>

<p><code>earl-report</code> can take defaults for options from an initialization file. When run, <code>earl-report</code> attempts to open the file <code>.earl</code> in the current directory. This file is in <a href="http://www.yaml.org/">YAML</a> format with entries for each option. Use the <code>--rc</code> option to automatically generate it.</p>

<h2 id="label-Author">Author</h2>
<ul><li>
<p><a href="https://github.com/gkellogg">Gregg Kellogg</a> - <a href="https://greggkellogg.net">greggkellogg.net</a>/</p>
</li></ul>

<h2 id="label-License">License</h2>

<p>This software is licensed using <a href="http://unlicense.org">Unlicense</a> and is freely available without encumbrance.</p>
</div></div>

      <div id="footer">
  Generated on Tue Mar 15 21:52:20 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.27 (ruby-3.1.1).
</div>

    </div>
  </body>
</html>